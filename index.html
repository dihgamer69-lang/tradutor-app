<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tradutor de Roteiros - Modo Hacker</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- ZIP + Download -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

<style>
/* ------------------------------- */
/* ---------- MATRIX BG ----------- */
/* ------------------------------- */

body {
    margin: 0;
    overflow-x: hidden;
    font-family: 'Courier New', monospace;
    background: black;
    color: #ff2424;
}

canvas.matrix {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw !important;
    height: 100vh !important;
    z-index: -1;
    opacity: 0.25;
}

/* ------------------------------- */
/* ---------- UI HACKER ---------- */
/* ------------------------------- */

h1 {
    font-size: 2.6rem;
    font-weight: bold;
    text-align: center;
    margin-top: 25px;
    color: #ff1a1a;
    text-shadow: 0 0 12px red;
}

.panel {
    border: 1px solid red;
    border-radius: 10px;
    padding: 25px;
    background: rgba(0,0,0,0.57);
    box-shadow: 0 0 12px rgba(255,0,0,0.25);
}

/* TEXTAREA */
textarea {
    background: #050505;
    border: 1px solid rgba(255,0,0,0.5);
    width: 100%;
    height: 650px;     /* AQUI aumentei muito */
    min-height: 650px; /* NÃO ENCOLHE MAIS */
    padding: 18px;
    color: #fff;
    font-size: 1rem;
    border-radius: 10px;
    resize: none;
    box-shadow: inset 0 0 14px rgba(255,0,0,0.35);
}

textarea::placeholder {
    color: #ffbaba;
}

/* Botões */
.hacker-btn {
    background: red;
    color: black;
    font-weight: bold;
    padding: 12px;
    border-radius: 8px;
    width: 100%;
    transition: 0.2s;
}
.hacker-btn:hover {
    background: #ff4d4d;
    box-shadow: 0 0 10px red;
}

/* Log */
#logBox {
    height: 200px;
    overflow-y: auto;
    padding: 14px;
    border: 1px solid rgba(255,0,0,0.5);
    border-radius: 10px;
    background: #050505;
    box-shadow: inset 0 0 12px rgba(255,0,0,0.35);
}
</style>
</head>

<body>

<!-- CANVAS MATRIX -->
<canvas class="matrix"></canvas>

<h1>Tradutor de Roteiros • Modo Hacker</h1>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6 px-6 mt-8">

    <!-- CONFIGURAÇÕES -->
    <div class="panel">
        <h2 class="text-xl font-bold mb-4">Configurações & Idiomas</h2>

        <div class="grid grid-cols-2 gap-2">
            <label><input type="checkbox" name="lang" value="en"> Inglês (EN)</label>
            <label><input type="checkbox" name="lang" value="es"> Espanhol (ES)</label>
            <label><input type="checkbox" name="lang" value="fr"> Francês (FR)</label>
            <label><input type="checkbox" name="lang" value="de"> Alemão (DE)</label>
            <label><input type="checkbox" name="lang" value="it"> Italiano (IT)</label>
            <label><input type="checkbox" name="lang" value="ru"> Russo (RU)</label>
            <label><input type="checkbox" name="lang" value="ja"> Japonês (JA)</label>
            <label><input type="checkbox" name="lang" value="ko"> Coreano (KO)</label>
            <label><input type="checkbox" name="lang" value="pl"> Polonês (PL)</label>
            <label><input type="checkbox" name="lang" value="tr"> Turco (TR)</label>
            <label><input type="checkbox" name="lang" value="vi"> Vietnamita (VI)</label>
        </div>

        <button id="translateBtn" class="hacker-btn mt-5">TRADUZIR ROTEIRO</button>
        <button id="zipBtn" class="hacker-btn mt-3">BAIXAR TODAS TRADUÇÕES (ZIP)</button>
    </div>

    <!-- ENTRADA -->
    <div class="panel">
        <h2 class="text-xl font-bold mb-4">Roteiro Original (Entrada)</h2>
        <textarea id="sourceText" placeholder="Cole aqui o seu roteiro..."></textarea>
    </div>
</div>

<!-- LOG -->
<div class="panel mx-6 mt-6">
    <h2 class="text-xl font-bold mb-3">Log do Sistema</h2>
    <div id="logBox">Sistema pronto...</div>
</div>

<script>
/* MATRIX CODE ANIMATION */
const canvas = document.querySelector("canvas.matrix");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const letters = "01 10 11 00 10 01 01 00 11 10";
const matrix = letters.split("");

const fontSize = 20;
const columns = canvas.width / fontSize;
const drops = Array(Math.floor(columns)).fill(1);

function draw() {
    ctx.fillStyle = "rgba(0,0,0,0.08)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = "#ff1a1a";
    ctx.font = fontSize + "px monospace";

    for (let i = 0; i < drops.length; i++) {
        const text = matrix[Math.floor(Math.random() * matrix.length)];
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);

        if (drops[i] * fontSize > canvas.height && Math.random() > 0.97) {
            drops[i] = 0;
        }
        drops[i]++;
    }
}
setInterval(draw, 40);

/* ------------------------------- */
/* -------- TRADUTOR ------------- */
/* ------------------------------- */

async function translateText(text, target) {
    const url = 
`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${target}&dt=t&q=${encodeURIComponent(text)}`;

    const resp = await fetch(url);
    const data = await resp.json();

    return data[0].map(x => x[0]).join("");
}

document.getElementById("translateBtn").onclick = async () => {
    const text = document.getElementById("sourceText").value.trim();
    if (!text) {
        log("Nenhum texto inserido.");
        return;
    }

    const langs = [...document.querySelectorAll("input[name=lang]:checked")]
                    .map(x => x.value);

    if (langs.length === 0) return log("Selecione pelo menos um idioma.");

    log("Iniciando traduções...");

    window.RESULTS = {};

    for (let lang of langs) {
        log("Traduzindo para: " + lang + "...");
        const translated = await translateText(text, lang);
        window.RESULTS[lang] = translated;
        log("Concluído: " + lang);
    }

    log("Todas traduções finalizadas!");
};

function log(msg) {
    const box = document.getElementById("logBox");
    box.innerHTML += "<br>" + msg;
    box.scrollTop = box.scrollHeight;
}

document.getElementById("zipBtn").onclick = async () => {
    if (!window.RESULTS) return log("Nenhuma tradução para baixar.");

    const zip = new JSZip();
    for (let lang in window.RESULTS) {
        zip.file(`traducao_${lang}.txt`, window.RESULTS[lang]);
    }

    const blob = await zip.generateAsync({type:"blob"});
    saveAs(blob, "traducoes.zip");

    log("ZIP gerado!");
};
</script>

</body>
</html>
