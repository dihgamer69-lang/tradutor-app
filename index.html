<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tradutor de Roteiros - Modo Hacker</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- JSZip e FileSaver para gerar ZIP -->
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.7.1/dist/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

  <style>
    :root {
      --red-main: #ff1a1a;
      --bg-dark: #050505;
    }

    body {
      font-family: 'Share Tech Mono', monospace;
      background-color: var(--bg-dark);
      color: #f5f5f5;
      overflow-x: hidden;
      position: relative;
      min-height: 100vh;
    }

    /* GRID VERMELHO AO FUNDO */
    .grid-bg {
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgba(255, 0, 0, 0.18) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 0, 0, 0.18) 1px, transparent 1px);
      background-size: 40px 40px;
      opacity: 0.35;
      animation: gridMove 16s linear infinite;
      z-index: -4;
    }

    @keyframes gridMove {
      0% { transform: translate3d(0, 0, 0); }
      100% { transform: translate3d(-40px, -40px, 0); }
    }

    /* MATRIX RAIN – LETRAS CAINDO */
    .matrix-column {
      position: fixed;
      top: -120vh;
      font-family: 'Share Tech Mono', monospace;
      font-size: 14px;
      color: rgba(120, 255, 120, 0.85);
      text-shadow: 0 0 8px rgba(120, 255, 120, 0.9);
      white-space: pre;
      pointer-events: none;
      z-index: -3;
      opacity: 0.0;
      animation-name: matrixFall;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }

    @keyframes matrixFall {
      0% {
        transform: translate3d(0, -110vh, 0);
        opacity: 0;
      }
      10% {
        opacity: 0.8;
      }
      100% {
        transform: translate3d(0, 130vh, 0);
        opacity: 0;
      }
    }

    /* CARTÕES PRINCIPAIS */
    .card {
      background-color: rgba(10, 0, 0, 0.8);
      border: 1px solid rgba(255, 0, 0, 0.4);
      box-shadow: 0 0 20px rgba(255, 0, 0, 0.25);
      backdrop-filter: blur(6px);
      border-radius: 14px;
      transition: transform 0.18s ease, box-shadow 0.18s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 28px rgba(255, 0, 0, 0.4);
    }

    /* BOTÕES HACKER */
    .btn-hacker {
      background: linear-gradient(135deg, #b30000, #ff1f1f);
      border-radius: 999px;
      padding: 12px 18px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      border: 1px solid #ff4d4d;
      box-shadow: 0 0 18px rgba(255, 0, 0, 0.6);
      transition: all 0.18s ease;
    }

    .btn-hacker:disabled {
      opacity: 0.35;
      cursor: not-allowed;
      box-shadow: none;
      border-color: #555;
    }

    .btn-hacker:not(:disabled):hover {
      transform: translateY(-1px) scale(1.02);
      box-shadow: 0 0 26px rgba(255, 0, 0, 0.9);
    }

    textarea {
      background-color: #050505;
      border: 1px solid rgba(255, 0, 0, 0.45);
      color: #fefefe;
      padding: 12px;
      border-radius: 10px;
      resize: none;
      outline: none;
      box-shadow: inset 0 0 14px rgba(255, 0, 0, 0.25);
      font-size: 0.95rem;
    }

    textarea::placeholder {
      color: #888;
    }

    .log-box {
      background-color: #050505;
      border-radius: 10px;
      border: 1px solid rgba(255, 0, 0, 0.45);
      padding: 10px 12px;
      font-size: 0.85rem;
      color: #ff7676;
      max-height: 150px;
      overflow-y: auto;
      box-shadow: inset 0 0 10px rgba(255, 0, 0, 0.25);
    }
  </style>
</head>
<body>

<!-- GRID VERMELHO -->
<div class="grid-bg"></div>

<!-- MATRIX RAIN GERADA POR JS -->
<script>
  (function createMatrixRain() {
    const chars = "01ABCDEFGHIJKLMNOPQRSTUVWXYZ@#$%&";
    const columns = 26;          // quantidade de colunas
    const minLen  = 18;
    const maxLen  = 35;

    for (let i = 0; i < columns; i++) {
      const col = document.createElement("div");
      col.className = "matrix-column";

      const length = Math.floor(Math.random() * (maxLen - minLen)) + minLen;
      let text = "";
      for (let j = 0; j < length; j++) {
        text += chars.charAt(Math.floor(Math.random() * chars.length)) + "\n";
      }
      col.textContent = text;

      col.style.left = (i * (100 / columns)) + Math.random() * 3 + "vw";
      col.style.animationDuration = (7 + Math.random() * 6) + "s";
      col.style.animationDelay = (Math.random() * 8) + "s";

      document.body.appendChild(col);
    }
  })();
</script>

<div class="max-w-6xl mx-auto px-4 py-10 relative">

  <!-- TÍTULO -->
  <header class="text-center mb-10">
    <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold tracking-wide"
        style="color: var(--red-main); text-shadow: 0 0 24px rgba(255,0,0,0.9);">
      Tradutor de Roteiros - Modo Hacker
    </h1>
    <p class="mt-2 text-sm text-red-300/80">
      Interface hacker, traduções múltiplas, gerenciamento de arquivos em um único painel.
    </p>
  </header>

  <!-- LAYOUT PRINCIPAL -->
  <main class="grid grid-cols-1 md:grid-cols-3 gap-6">

    <!-- COLUNA: CONFIGURAÇÕES -->
    <section class="card p-6 md:col-span-1">
      <h2 class="text-xl font-semibold mb-4 text-red-300">Configurações & Idiomas</h2>
      <p class="text-xs text-red-200/70 mb-3">
        Selecione os idiomas de destino para a tradução em massa do roteiro.
      </p>

      <div class="grid grid-cols-2 gap-2 text-sm mb-4">
        <label class="flex items-center space-x-2">
          <input type="checkbox" value="en" class="accent-red-500" />
          <span>Inglês (EN)</span>
        </label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" value="es" class="accent-red-500" />
          <span>Espanhol (ES)</span>
        </label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" value="fr" class="accent-red-500" />
          <span>Francês (FR)</span>
        </label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" value="de" class="accent-red-500" />
          <span>Alemão (DE)</span>
        </label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" value="it" class="accent-red-500" />
          <span>Italiano (IT)</span>
        </label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" value="ru" class="accent-red-500" />
          <span>Russo (RU)</span>
        </label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" value="ja" class="accent-red-500" />
          <span>Japonês (JA)</span>
        </label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" value="ko" class="accent-red-500" />
          <span>Coreano (KO)</span>
        </label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" value="pl" class="accent-red-500" />
          <span>Polonês (PL)</span>
        </label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" value="tr" class="accent-red-500" />
          <span>Turco (TR)</span>
        </label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" value="vi" class="accent-red-500" />
          <span>Vietnamita (VI)</span>
        </label>
      </div>

      <button id="translateBtn" class="btn-hacker mb-3">
        Traduzir Roteiro
      </button>

      <button id="zipBtn" class="btn-hacker">
        Baixar Todas Traduções (ZIP)
      </button>

      <p class="text-[10px] text-red-200/60 mt-4">
        Engine: Google Translate endpoint público (modo experimental). Para produção,
        o ideal é plugar sua própria API oficial.
      </p>
    </section>

    <!-- COLUNA: ENTRADA -->
    <section class="card p-6 md:col-span-2">
      <h2 class="text-xl font-semibold mb-4 text-red-300">Roteiro Original (Entrada)</h2>
      <textarea id="inputText" rows="14"
        placeholder="Cole aqui seu roteiro completo. O sistema Modo Hacker executa a tradução em massa para os idiomas selecionados.">
      </textarea>
    </section>
  </main>

  <!-- LOG -->
  <section class="card p-6 mt-8">
    <h2 class="text-xl font-semibold mb-3 text-red-300">Log do Sistema</h2>
    <div id="logBox" class="log-box">
      Sistema pronto. Aguardando entrada do roteiro...
    </div>
  </section>
</div>

<script>
  const logBox = document.getElementById('logBox');
  const inputText = document.getElementById('inputText');
  const translateBtn = document.getElementById('translateBtn');
  const zipBtn = document.getElementById('zipBtn');

  let translations = {};

  function hackerLog(message) {
    const time = new Date().toLocaleTimeString('pt-BR', { hour12: false });
    logBox.innerHTML += `<br><span class="text-red-400">[${time}]</span> ${message}`;
    logBox.scrollTop = logBox.scrollHeight;
  }

  async function translate(text, lang) {
    const url =
      "https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=" +
      lang +
      "&dt=t&q=" +
      encodeURIComponent(text);

    const res = await fetch(url);
    if (!res.ok) {
      throw new Error("Erro HTTP " + res.status);
    }
    const data = await res.json();
    return data[0].map((seg) => seg[0]).join("");
  }

  translateBtn.addEventListener('click', async () => {
    const text = inputText.value.trim();
    if (!text) {
      alert("Cole o roteiro antes de traduzir.");
      return;
    }

    const checked = Array.from(
      document.querySelectorAll('input[type="checkbox"]:checked')
    ).map((el) => el.value);

    if (checked.length === 0) {
      alert("Selecione pelo menos um idioma.");
      return;
    }

    translateBtn.disabled = true;
    zipBtn.disabled = true;
    translations = {};
    logBox.innerHTML = "Iniciando modo Hacker de tradução massiva...";

    for (const lang of checked) {
      try {
        hackerLog("Traduzindo para " + lang.toUpperCase() + "...");
        const t = await translate(text, lang);
        translations[lang] = t;
        hackerLog("Concluído para " + lang.toUpperCase() + ".");
      } catch (e) {
        console.error(e);
        hackerLog("FALHA para " + lang.toUpperCase() + ": " + e.message);
      }
    }

    hackerLog("Processo finalizado. Se quiser, gere o pacote ZIP com todas as traduções.");
    zipBtn.disabled = false;
    translateBtn.disabled = false;
  });

  zipBtn.addEventListener('click', () => {
    if (!translations || Object.keys(translations).length === 0) {
      alert("Nenhuma tradução disponível. Execute uma tradução primeiro.");
      return;
    }

    const zip = new JSZip();
    for (const lang in translations) {
      const filename = "traducao_" + lang.toUpperCase() + ".txt";
      zip.file(filename, translations[lang]);
    }

    hackerLog("Gerando arquivo ZIP com todas as traduções...");
    zip.generateAsync({ type: "blob" }).then((content) => {
      saveAs(content, "traducoes_modo_hacker.zip");
      hackerLog("ZIP pronto para download.");
    });
  });
</script>

</body>
</html>
